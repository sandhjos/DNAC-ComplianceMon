
Building configuration...

Current configuration : 84847 bytes
!
! Last configuration change at 19:47:12 edt Wed Jul 26 2023
!
version 17.6
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
service call-home
no platform punt-keepalive disable-kernel-core
!
hostname edge-1
!
!
vrf definition Campus
 !
 address-family ipv4
 exit-address-family
!
vrf definition Guest
 !
 address-family ipv4
 exit-address-family
!
vrf definition Mgmt-vrf
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
enable secret 9 xxxxxxxx
!
aaa new-model
!
!
aaa group server radius dnac-client-radius-group
 server name dnac-radius_10.10.0.200
 ip radius source-interface Loopback0
!
aaa authentication login default local
aaa authentication login dnac-cts-list group dnac-client-radius-group local
aaa authentication dot1x default group dnac-client-radius-group
aaa authorization exec default local 
aaa authorization network default group dnac-client-radius-group 
aaa authorization network dnac-cts-list group dnac-client-radius-group 
aaa accounting update newinfo periodic 2880
aaa accounting identity default start-stop group dnac-client-radius-group
!
!
!
!
!
aaa server radius dynamic-author
 client 10.10.0.200 server-key 7 xxxxxxxx
!
aaa session-id common
boot system switch all flash:packages.conf
clock timezone est 5 0
clock summer-time edt recurring
switch 1 provision c9300-24p
software auto-upgrade enable
!
!
!
!
!
ip routing
!
!
ip nbar http-services
!
ip nbar custom socio http url "app.socio.events" id 6676 
ip nbar custom VUDU http url "https://www.vudu.com" id 55850 
!
ip nbar attribute-map BR0
 attribute business-relevance business-relevant
ip nbar attribute-map TC3_BR0
 attribute traffic-class multimedia-streaming
 attribute business-relevance business-relevant
!
!
ip nbar attribute-set socio TC3_BR0
ip nbar attribute-set VUDU TC3_BR0
!
ip name-server 10.10.0.250
ip domain lookup source-interface Loopback0
ip domain name sda.base2hq.com
ip dhcp relay information option
!
!
!
ip dhcp snooping vlan 1021-1022,2045,2047
ip dhcp snooping
 login xxxxxx
ipv6 nd raguard policy dnac-sda-permit-nd-raguardv6
 device-role router
!
ipv6 dhcp guard policy dnac-sda-permit-dhcpv6
 device-role server
!
!
!
!
!
!
!
device-sensor filter-list lldp list iseLLDP
 tlv name system-name
 tlv name system-description
 tlv name system-capabilities
!
device-sensor filter-list dhcp list iseDHCP
 option name host-name
 option name parameter-request-list
 option name class-identifier
 option name v-i-vendor-class
!
device-sensor filter-list cdp list iseCDP
 tlv name device-name
 tlv name capabilities-type
 tlv name version-type
 tlv name platform-type
device-sensor filter-spec dhcp include list iseDHCP
device-sensor filter-spec lldp include list iseLLDP
device-sensor filter-spec cdp include list iseCDP
device-sensor notify all-changes
!
!
vtp domain cisco-pov
vtp mode transparent
mpls label mode all-vrfs protocol all-afs per-vrf
avc sd-service
 segment AppRecognition
 controller
  address 10.10.0.20 
  destination-ports sensor-exporter 21730
  dscp 16
  source-interface Loopback0
  transport application-updates https url-prefix sdavc
 !
!
!
parameter-map type subscriber attribute-to-service BUILTIN_DEVICE_TO_TEMPLATE
 1 map device-type regex "IE-400*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 2 map device-type regex "Cisco-DMP"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 3 map device-type regex "IE-401*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 4 map device-type regex "Cisco-Switch"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 5 map device-type regex "CDB*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 6 map device-type regex "WS-C3560CX*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 7 map device-type regex "IE-330*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 8 map device-type regex "IE-3400*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 9 map device-type regex "IE-320*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 11 map device-type regex "IE-500*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 12 map device-type regex "CMICR*"
  10 interface-template SWITCH_INTERFACE_TEMPLATE
 60 map device-type regex "Cisco-AIR-AP"
  20 interface-template AP_INTERFACE_TEMPLATE
 70 map device-type regex "Cisco-AIR-LAP"
  20 interface-template LAP_INTERFACE_TEMPLATE
 110 map device-type regex "Cisco-CAT-LAP"
  10 interface-template LAP_INTERFACE_TEMPLATE
 200 map device-type regex "Aruba-AP"
  10 interface-template ARUBA_ACCESS_POINT_AUTOCONF
 210 map device-type regex "Aruba-Device"
  10 interface-template ARUBA_ACCESS_POINT_AUTOCONF
!
access-session attributes filter-list list Def_Acct_List
 cdp
 lldp
 dhcp
 http
access-session accounting attributes filter-spec include list Def_Acct_List
access-session interface-template sticky timer 30
access-session acl default passthrough
device-tracking tracking
!
device-tracking policy IPDT_POLICY
 no protocol udp
 tracking enable
!
!
flow exporter 10.10.0.20
 destination 10.10.0.20
 transport udp 6007
!
!
flow monitor eta-mon
!
!
!
table-map policed-dscp
 map from  0 to 8
 map from  10 to 8
 map from  18 to 8
 map from  24 to 8
 map from  46 to 8
 default copy
table-map AutoConf-4.0-Trust-Cos-Table
 default copy
table-map AutoConf-4.0-Trust-Dscp-Table
 default copy
!
!
crytpo pki xxxxxxx
 enrollment pkcs12
 revocation-check crl
!
crytpo pki xxxxxxx
 enrollment selfsigned
 subject-name xxxxxxxx
 revocation-check none
 rsakeypair TP-self-signed- xxxxxxxx
!
crytpo pki xxxxxxx
 enrollment mode ra
 enrollment terminal
 usage ssl-client
 revocation-check crl none
 source interface Loopback0
!
crytpo pki xxxxxxx
 enrollment url http://10.10.0.20:80/ejbca/publicweb/apply/scep/sdnscep
 fqdn edge-1.sda.base2hq.com
 subject-name xxxxxxxx
 subject-alt-name edge-1.sda.base2hq.com
 revocation-check crl
 source interface Loopback0
 rsakeypair xxxxxxxx
 auto-enroll 80 regenerate
!
!
crypto pki certificate chain xxxxxxx
 certificate ca xxxxxxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
quit
crypto pki certificate chain xxxxxxx
 certificate self-signed xxxxxxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
quit
crypto pki certificate chain xxxxxxx
 certificate ca xxxxxxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
quit
crypto pki certificate chain xxxxxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
quit
 certificate ca xxxxxxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
  xxxx  xxxxx  xxxx  xxxx  xxxx
quit
!
cts authorization list dnac-cts-list
!
service-template DEFAULT_LINKSEC_POLICY_MUST_SECURE
 linksec policy must-secure
service-template DEFAULT_LINKSEC_POLICY_SHOULD_SECURE
 linksec policy should-secure
service-template DEFAULT_CRITICAL_VOICE_TEMPLATE
 voice vlan
service-template DEFAULT_CRITICAL_DATA_TEMPLATE
service-template webauth-global-inactive
 inactivity-timer 3600 
service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
service-template DefaultCriticalVoice_SRV_TEMPLATE
 voice vlan
service-template DefaultCriticalAccess_SRV_TEMPLATE
 access-group IPV4_CRITICAL_AUTH_ACL
 access-group IPV6_CRITICAL_AUTH_ACL
dot1x system-auth-control
dot1x critical eapol
system mtu 9100
license boot level network-advantage addon dna-advantage
license smart transport off
device classifier
!
!
diagnostic bootup level minimal
!
spanning-tree mode rapid-pvst
spanning-tree extend system-id
memory free low-watermark processor 131709
!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause security-violation
errdisable recovery cause channel-misconfig
errdisable recovery cause pagp-flap
errdisable recovery cause dtp-flap
errdisable recovery cause link-flap
errdisable recovery cause sfp-config-mismatch
errdisable recovery cause gbic-invalid
errdisable recovery cause l2ptguard
errdisable recovery cause psecure-violation
errdisable recovery cause port-mode-failure
errdisable recovery cause dhcp-rate-limit
errdisable recovery cause pppoe-ia-rate-limit
errdisable recovery cause mac-limit
errdisable recovery cause storm-control
errdisable recovery cause inline-power
errdisable recovery cause arp-inspection
errdisable recovery cause link-monitor-failure
errdisable recovery cause oam-remote-failure
errdisable recovery cause loopback
errdisable recovery cause psp
errdisable recovery cause mrp-miscabling
errdisable recovery cause loopdetect

et-analytics
 ip flow-export destination 10.10.0.212 2055
username netadmin privilege 15 secret xxxxxx 
!
redundancy
 mode sso
!
!
!
!
crypto engine compliance shield disable
!
!
transceiver type all
 monitoring
!
vlan 1021
 name Campus
!
vlan 1022
 name Guest
!
vlan 2045
 name AccessPoints
!
vlan 2046
 name VOICE_VLAN
!
vlan 2047
 name ExtendedNode
lldp run
!
track 1 ip sla 1 reachability
 delay down 60 up 60
!
class-map type control subscriber match-all AAA_SVR_DOWN_AUTHD_HOST
 match authorization-status authorized
 match result-type aaa-timeout
!
class-map type control subscriber match-all AAA_SVR_DOWN_UNAUTHD_HOST
 match authorization-status unauthorized
 match result-type aaa-timeout
!
class-map type control subscriber match-all AUTHC_SUCCESS-AUTHZ_FAIL
 match authorization-status unauthorized
 match result-type success
!
class-map type control subscriber match-all DOT1X
 match method dot1x
!
class-map type control subscriber match-all DOT1X_FAILED
 match method dot1x
 match result-type method dot1x authoritative
!
class-map type control subscriber match-all DOT1X_MEDIUM_PRIO
 match authorizing-method-priority gt 20
!
class-map type control subscriber match-all DOT1X_NO_RESP
 match method dot1x
 match result-type method dot1x agent-not-found
!
class-map type control subscriber match-all DOT1X_TIMEOUT
 match method dot1x
 match result-type method dot1x method-timeout
!
class-map type control subscriber match-any IN_CRITICAL_AUTH
 match activated-service-template DefaultCriticalVoice_SRV_TEMPLATE
!
class-map type control subscriber match-any IN_CRITICAL_AUTH_CLOSED_MODE
 match activated-service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
 match activated-service-template DefaultCriticalVoice_SRV_TEMPLATE
!
class-map type control subscriber match-all MAB
 match method mab
!
class-map type control subscriber match-all MAB_FAILED
 match method mab
 match result-type method mab authoritative
!
class-map type control subscriber match-none NOT_IN_CRITICAL_AUTH
 match activated-service-template DefaultCriticalVoice_SRV_TEMPLATE
!
class-map type control subscriber match-none NOT_IN_CRITICAL_AUTH_CLOSED_MODE
 match activated-service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
 match activated-service-template DefaultCriticalVoice_SRV_TEMPLATE
!
!
class-map match-any system-cpp-police-ewlc-control
  description EWLC Control 
class-map match-any system-cpp-police-topology-control
  description Topology control
class-map match-any system-cpp-police-sw-forward
  description Sw forwarding, L2 LVX data packets, LOGGING, Transit Traffic
class-map match-any AutoConf-4.0-Transaction-Class
 match access-group name AutoConf-4.0-Acl-Transactional-Data
class-map match-any AutoConf-4.0-Output-Trans-Data-Queue
 match dscp af21  af22  af23 
 match cos  2 
class-map match-any AutoConf-4.0-Default-Class
 match access-group name AutoConf-4.0-Acl-Default
class-map match-any DNA-MARKING_IN#REALTIME_CUSTOM
class-map match-all DNA-MARKING_IN#MM_STREAM
 match protocol attribute traffic-class multimedia-streaming
 match protocol attribute business-relevance business-relevant
class-map match-all DNA-MARKING_IN#OAM
 match protocol attribute traffic-class ops-admin-mgmt
 match protocol attribute business-relevance business-relevant
class-map match-any system-cpp-default
  description EWLC Data, Inter FED Traffic 
class-map match-all DNA-MARKING_IN#CONTROL
 match protocol attribute traffic-class network-control
 match protocol attribute business-relevance business-relevant
class-map match-any DNA-MARKING_IN#TRANS_DATA_CUSTOM
class-map match-any system-cpp-police-sys-data
  description Openflow, Exception, EGR Exception, NFL Sampled Data, RPF Failed
class-map match-any AutoConf-4.0-Output-Scavenger-Queue
 match dscp cs1 
class-map match-all DNA-MARKING_IN#MM_CONF
 match protocol attribute traffic-class multimedia-conferencing
 match protocol attribute business-relevance business-relevant
class-map match-all DNA-MARKING_IN#SCAVENGER
 match protocol attribute business-relevance business-irrelevant
class-map match-any AutoConf-4.0-Output-Control-Mgmt-Queue
 match dscp cs2  cs3  cs6  cs7 
 match cos  3 
class-map match-all DNA-MARKING_IN#SIGNALING
 match protocol attribute traffic-class signaling
 match protocol attribute business-relevance business-relevant
class-map match-all DNA-MARKING_IN#BROADCAST
 match protocol attribute traffic-class broadcast-video
 match protocol attribute business-relevance business-relevant
class-map match-all DNA-MARKING_IN#BULK_DATA
 match protocol attribute traffic-class bulk-data
 match protocol attribute business-relevance business-relevant
class-map match-any AutoConf-4.0-Scavanger-Class
 match access-group name AutoConf-4.0-Acl-Scavanger
class-map match-any AutoConf-4.0-Signaling-Class
 match access-group name AutoConf-4.0-Acl-Signaling
class-map match-any system-cpp-police-punt-webauth
  description Punt Webauth
class-map match-all DNA-MARKING_IN#VOICE
 match protocol attribute traffic-class voip-telephony
 match protocol attribute business-relevance business-relevant
class-map match-any system-cpp-police-l2lvx-control
  description L2 LVX control packets
class-map match-any system-cpp-police-forus
  description Forus Address resolution and Forus traffic
class-map match-any DNA-EZQOS_2P6Q3T_9K#BULK-DATA
 match dscp cs1 
 match dscp af12 
 match dscp af13 
 match dscp af11 
class-map match-any system-cpp-police-multicast-end-station
  description MCAST END STATION
class-map match-any system-cpp-police-high-rate-app
  description High Rate Applications 
class-map match-any AutoConf-4.0-Voip-Video-CiscoPhone-Class
 match cos  4 
class-map match-any system-cpp-police-multicast
  description MCAST Data
class-map match-any DNA-EZQOS_2P6Q3T_9K#CONTROL-PLANE
 match dscp cs3 
 match dscp cs2 
 match dscp cs7 
 match dscp cs6 
class-map match-any DNA-EZQOS_2P6Q3T_9K#MULTIMEDIA-CONFERENCING
 match dscp af43 
 match dscp af41 
 match dscp af42 
class-map match-any system-cpp-police-l2-control
  description L2 control
class-map match-any DNA-MARKING_IN#CONTROL_CUSTOM
class-map match-any system-cpp-police-dot1x-auth
  description DOT1X Auth
class-map match-any AutoConf-4.0-Output-Multimedia-ConfQueue
 match dscp af41  af42  af43 
 match cos  4 
class-map match-any system-cpp-police-data
  description ICMP redirect, ICMP_GEN and BROADCAST
class-map match-any DNA-MARKING_IN#MM_STREAM_CUSTOM
class-map match-any DNA-MARKING_IN#OAM_CUSTOM
 match access-group name DNA-MARKING_IN#OAM_CUSTOM__acl
class-map match-all DNA-MARKING_IN#REALTIME
 match protocol attribute traffic-class real-time-interactive
 match protocol attribute business-relevance business-relevant
class-map match-any DNA-EZQOS_2P6Q3T_9K#VIDEO-PQ2
 match dscp cs5 
 match dscp cs4 
class-map match-any DNA-EZQOS_2P6Q3T_9K#VOICE-PQ1
 match dscp ef 
class-map match-any system-cpp-police-stackwise-virt-control
  description Stackwise Virtual OOB
class-map match-any DNA-MARKING_IN#VOICE_CUSTOM
class-map match-any system-cpp-police-control-low-priority
  description General punt
class-map match-any DNA-MARKING_IN#SCAVENGER_CUSTOM
class-map match-any AutoConf-4.0-Output-Multimedia-StrmQueue
 match dscp af31  af32  af33 
class-map match-any DNA-MARKING_IN#SIGNALING_CUSTOM
class-map match-any AutoConf-4.0-Voip-Data-CiscoPhone-Class
 match cos  5 
class-map match-any DNA-MARKING_IN#BROADCAST_CUSTOM
class-map match-any DNA-MARKING_IN#BULK_DATA_CUSTOM
class-map match-any AutoConf-4.0-Voip-SignalClass
 match dscp cs3 
 match cos  3 
class-map match-any non-client-nrt-class
class-map match-all DNA-MARKING_IN#TRANS_DATA
 match protocol attribute traffic-class transactional-data
 match protocol attribute business-relevance business-relevant
class-map match-any DNA-MARKING_IN#MM_CONF_CUSTOM
class-map match-any system-cpp-police-routing-control
  description Routing control and Low Latency
class-map match-any system-cpp-police-protocol-snooping
  description Protocol snooping
class-map match-any AutoConf-4.0-Output-Bulk-Data-Queue
 match dscp af11  af12  af13 
 match cos  1 
class-map match-any AutoConf-4.0-Multimedia-Conf-Class
 match access-group name AutoConf-4.0-Acl-MultiEnhanced-Conf
class-map match-any system-cpp-police-dhcp-snooping
  description DHCP snooping
class-map match-any AutoConf-4.0-Bulk-Data-Class
 match access-group name AutoConf-4.0-Acl-Bulk-Data
class-map match-any system-cpp-police-ios-routing
  description L2 control, Topology control, Routing control, Low Latency
class-map match-any DNA-MARKING_IN#TUNNELED-NBAR
 match access-group name DNA-MARKING_IN#TUNNELED-NBAR__acl
class-map match-any DNA-EZQOS_2P6Q3T_9K#TRANSACTIONAL-DATA
 match dscp af23 
 match dscp af21 
 match dscp af22 
class-map match-any system-cpp-police-system-critical
  description System Critical and Gold Pkt
class-map match-any AutoConf-4.0-VoipSignal-CiscoPhone-Class
 match cos  3 
class-map match-any system-cpp-police-ios-feature
  description ICMPGEN,BROADCAST,ICMP,L2LVXCntrl,ProtoSnoop,PuntWebauth,MCASTData,Transit,DOT1XAuth,Swfwd,LOGGING,L2LVXData,ForusTraffic,ForusARP,McastEndStn,Openflow,Exception,EGRExcption,NflSampled,RpfFailed
class-map match-any DNA-EZQOS_2P6Q3T_9K#MULTIMEDIA-STREAMING
 match dscp af32 
 match dscp af33 
 match dscp af31 
class-map match-any AutoConf-4.0-Output-Priority-Queue
 match dscp cs4  cs5  ef 
 match cos  5 
class-map match-any AutoConf-4.0-Voip-Data-Class
 match dscp ef 
 match cos  5 
!
!
policy-map type control subscriber PMAP_DefaultWiredDot1xClosedAuth_1X_MAB
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using dot1x retries 2 retry-time 0 priority 10
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  40 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate dot1x
   20 terminate mab
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH_CLOSED_MODE do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH_CLOSED_MODE do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map type control subscriber PMAP_DefaultWiredDot1xClosedAuth_MAB_1X
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using mab priority 20
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
  40 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate mab
   20 terminate dot1x
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH_CLOSED_MODE do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH_CLOSED_MODE do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map type control subscriber PMAP_DefaultWiredDot1xLowImpactAuth_1X_MAB
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using dot1x retries 2 retry-time 0 priority 10
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   25 activate service-template DefaultCriticalAccess_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  40 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate dot1x
   20 terminate mab
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map type control subscriber PMAP_DefaultWiredDot1xLowImpactAuth_MAB_1X
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using mab priority 20
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   25 activate service-template DefaultCriticalAccess_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
  40 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate mab
   20 terminate dot1x
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map type control subscriber PMAP_DefaultWiredDot1xOpenAuth_1X_MAB
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using dot1x retries 2 retry-time 0 priority 10
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  40 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate dot1x
   20 terminate mab
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map type control subscriber PMAP_DefaultWiredDot1xOpenAuth_MAB_1X
 event session-started match-all
  10 class always do-until-failure
   10 authenticate using mab priority 20
 event authentication-failure match-first
  5 class DOT1X_FAILED do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  10 class AAA_SVR_DOWN_UNAUTHD_HOST do-until-failure
   10 activate service-template DefaultCriticalAuthVlan_SRV_TEMPLATE
   20 activate service-template DefaultCriticalVoice_SRV_TEMPLATE
   30 authorize
   40 pause reauthentication
  20 class AAA_SVR_DOWN_AUTHD_HOST do-until-failure
   10 pause reauthentication
   20 authorize
  30 class MAB_FAILED do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
  40 class DOT1X_NO_RESP do-until-failure
   10 terminate dot1x
   20 authentication-restart 60
  50 class DOT1X_TIMEOUT do-until-failure
   10 terminate dot1x
   20 authenticate using mab priority 20
  60 class always do-until-failure
   10 terminate mab
   20 terminate dot1x
   30 authentication-restart 60
 event aaa-available match-all
  10 class IN_CRITICAL_AUTH do-until-failure
   10 clear-session
  20 class NOT_IN_CRITICAL_AUTH do-until-failure
   10 resume reauthentication
 event agent-found match-all
  10 class always do-until-failure
   10 terminate mab
   20 authenticate using dot1x retries 2 retry-time 0 priority 10
 event inactivity-timeout match-all
  10 class always do-until-failure
   10 clear-session
 event authentication-success match-all
 event violation match-all
  10 class always do-until-failure
   10 restrict
 event authorization-failure match-all
  10 class AUTHC_SUCCESS-AUTHZ_FAIL do-until-failure
   10 authentication-restart 60
!
policy-map AutoConf-4.0-Trust-Cos-Input-Policy
 class class-default
  set cos cos table AutoConf-4.0-Trust-Cos-Table
policy-map AutoConf-4.0-Output-Policy
 class AutoConf-4.0-Output-Priority-Queue
  priority level 1 percent 30
 class AutoConf-4.0-Output-Control-Mgmt-Queue
  bandwidth remaining percent 10 
  queue-limit dscp cs2 percent 80
  queue-limit dscp cs3 percent 90
  queue-limit dscp cs6 percent 100
  queue-limit dscp cs7 percent 100
  queue-buffers ratio 10
 class AutoConf-4.0-Output-Multimedia-ConfQueue
  bandwidth remaining percent 10 
  queue-buffers ratio 10
 class AutoConf-4.0-Output-Trans-Data-Queue
  bandwidth remaining percent 10 
  queue-buffers ratio 10
 class AutoConf-4.0-Output-Bulk-Data-Queue
  bandwidth remaining percent 4 
  queue-buffers ratio 10
 class AutoConf-4.0-Output-Scavenger-Queue
  bandwidth remaining percent 1 
  queue-buffers ratio 10
 class AutoConf-4.0-Output-Multimedia-StrmQueue
  bandwidth remaining percent 10 
  queue-buffers ratio 10
 class class-default
  bandwidth remaining percent 25 
  queue-buffers ratio 25
policy-map AutoConf-4.0-CiscoSoftPhone-Input-Policy
 class AutoConf-4.0-Voip-Data-Class
  set dscp ef
  police cir 128000 bc 8000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Voip-SignalClass
  set dscp cs3
  police cir 32000 bc 8000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Multimedia-Conf-Class
  set dscp af41
  police cir 5000000
   conform-action transmit 
   exceed-action drop 
 class AutoConf-4.0-Bulk-Data-Class
  set dscp af11
  police cir 10000000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Transaction-Class
  set dscp af21
  police cir 10000000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Scavanger-Class
  set dscp cs1
  police cir 10000000
   conform-action transmit 
   exceed-action drop 
 class AutoConf-4.0-Signaling-Class
  set dscp cs3
  police cir 32000 bc 8000
   conform-action transmit 
   exceed-action drop 
 class AutoConf-4.0-Default-Class
  set dscp default
  police cir 10000000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
policy-map system-cpp-policy
 class system-cpp-police-control-low-priority
  police rate 200 pps
policy-map DNA-dscp#APIC_QOS_Q_OUT
 class DNA-EZQOS_2P6Q3T_9K#VOICE-PQ1
  priority level 1
  police rate percent 10
  queue-buffers ratio 15
 class DNA-EZQOS_2P6Q3T_9K#VIDEO-PQ2
  priority level 2
  police rate percent 23
  queue-buffers ratio 10
 class DNA-EZQOS_2P6Q3T_9K#CONTROL-PLANE
  bandwidth remaining percent 10 
  queue-buffers ratio 10
 class DNA-EZQOS_2P6Q3T_9K#MULTIMEDIA-CONFERENCING
  bandwidth remaining percent 15 
  queue-buffers ratio 10
  queue-limit dscp af41 percent 100
  queue-limit dscp af42 percent 90
  queue-limit dscp af43 percent 80
 class DNA-EZQOS_2P6Q3T_9K#MULTIMEDIA-STREAMING
  bandwidth remaining percent 15 
  queue-buffers ratio 10
  queue-limit dscp af32 percent 90
  queue-limit dscp af33 percent 80
 class DNA-EZQOS_2P6Q3T_9K#TRANSACTIONAL-DATA
  bandwidth remaining percent 15 
  queue-buffers ratio 10
  random-detect dscp-based
  random-detect dscp 18 percent 80 100
  random-detect dscp 20 percent 70 100
  random-detect dscp 22 percent 60 100
 class DNA-EZQOS_2P6Q3T_9K#BULK-DATA
  bandwidth remaining percent 7 
  queue-buffers ratio 10
  random-detect dscp-based
  random-detect dscp 8 percent 60 100
  random-detect dscp 10 percent 80 100
  random-detect dscp 12 percent 70 100
  random-detect dscp 14 percent 60 100
 class class-default
  bandwidth remaining percent 38 
  queue-buffers ratio 25
  random-detect dscp-based
  random-detect dscp 0 percent 80 100
policy-map AutoConf-4.0-Trust-Dscp-Input-Policy
 class class-default
  set dscp dscp table AutoConf-4.0-Trust-Dscp-Table
policy-map AutoConf-4.0-CiscoPhone-Input-Policy
 class AutoConf-4.0-Voip-Data-CiscoPhone-Class
  set dscp ef
  police cir 128000 bc 8000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Voip-Video-CiscoPhone-Class
  set dscp af41
  police cir 10000000 bc 8000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-VoipSignal-CiscoPhone-Class
  set dscp cs3
  police cir 32000 bc 8000
   conform-action transmit 
   exceed-action set-dscp-transmit dscp table policed-dscp
 class AutoConf-4.0-Default-Class
  set dscp default
policy-map port_child_policy
 class non-client-nrt-class
  bandwidth remaining ratio 10
policy-map DNA-MARKING_IN
 class DNA-MARKING_IN#TUNNELED-NBAR
 class DNA-MARKING_IN#VOICE_CUSTOM
  set dscp ef
 class DNA-MARKING_IN#BROADCAST_CUSTOM
  set dscp cs5
 class DNA-MARKING_IN#REALTIME_CUSTOM
  set dscp cs4
 class DNA-MARKING_IN#MM_CONF_CUSTOM
  set dscp af41
 class DNA-MARKING_IN#MM_STREAM_CUSTOM
  set dscp af31
 class DNA-MARKING_IN#CONTROL_CUSTOM
  set dscp cs6
 class DNA-MARKING_IN#SIGNALING_CUSTOM
  set dscp cs3
 class DNA-MARKING_IN#OAM_CUSTOM
  set dscp cs2
 class DNA-MARKING_IN#TRANS_DATA_CUSTOM
  set dscp af21
 class DNA-MARKING_IN#BULK_DATA_CUSTOM
  set dscp af11
 class DNA-MARKING_IN#SCAVENGER_CUSTOM
  set dscp cs1
 class DNA-MARKING_IN#VOICE
  set dscp ef
 class DNA-MARKING_IN#BROADCAST
  set dscp cs5
 class DNA-MARKING_IN#REALTIME
  set dscp cs4
 class DNA-MARKING_IN#MM_CONF
  set dscp af41
 class DNA-MARKING_IN#MM_STREAM
  set dscp af31
 class DNA-MARKING_IN#CONTROL
  set dscp cs6
 class DNA-MARKING_IN#SIGNALING
  set dscp cs3
 class DNA-MARKING_IN#OAM
  set dscp cs2
 class DNA-MARKING_IN#TRANS_DATA
  set dscp af21
 class DNA-MARKING_IN#BULK_DATA
  set dscp af11
 class DNA-MARKING_IN#SCAVENGER
  set dscp cs1
 class class-default
  set dscp default
!
! 
!
!
!
!
!
!
!
!
!
autoconf enable
!
template AP_INTERFACE_TEMPLATE
 switchport mode trunk
 switchport nonegotiate
 switchport port-security aging type inactivity
 service-policy input AutoConf-4.0-Trust-Cos-Input-Policy
!
template ARUBA_ACCESS_POINT_AUTOCONF
 switchport access vlan 2045
 switchport trunk native vlan 2045
 switchport trunk allowed vlan 1021,1022,2045
 switchport mode trunk
 description Access Point Interface
!
template ARUBA_ACCESS_POINT_DOT1X
 dot1x pae authenticator
 dot1x timeout supp-timeout 7
 dot1x max-req 3
 switchport access vlan 2045
 switchport trunk native vlan 2045
 switchport trunk allowed vlan 1021,1022,2045
 switchport mode trunk
 mab
 access-session closed
 access-session port-control auto
 authentication periodic
 authentication timer reauthenticate server
 service-policy type control subscriber PMAP_DefaultWiredDot1xClosedAuth_MAB_1X
 description Access Point Interface
!
template ApAutzTemplate
 switchport access vlan 2045
 switchport mode access
 access-session interface-template sticky timer 60
!
template DMP_INTERFACE_TEMPLATE
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport mode access
 switchport block unicast
 switchport port-security aging type inactivity
!
template DefaultWiredDot1xClosedAuth
 dot1x pae authenticator
 dot1x timeout supp-timeout 2
 dot1x max-req 3
 switchport mode access
 switchport voice vlan 2046
 mab
 access-session closed
 access-session port-control auto
 authentication periodic
 authentication timer reauthenticate server
 service-policy type control subscriber PMAP_DefaultWiredDot1xClosedAuth_1X_MAB
!
template DefaultWiredDot1xLowImpactAuth
 dot1x pae authenticator
 dot1x timeout supp-timeout 7
 dot1x max-req 3
 switchport mode access
 switchport voice vlan 2046
 mab
 access-session port-control auto
 authentication periodic
 authentication timer reauthenticate server
 service-policy type control subscriber PMAP_DefaultWiredDot1xLowImpactAuth_1X_MAB
!
template DefaultWiredDot1xOpenAuth
 dot1x pae authenticator
 dot1x timeout supp-timeout 2
 dot1x max-req 3
 switchport mode access
 switchport voice vlan 2046
 mab
 access-session port-control auto
 authentication periodic
 authentication timer reauthenticate server
 service-policy type control subscriber PMAP_DefaultWiredDot1xOpenAuth_1X_MAB
!
template IP_CAMERA_INTERFACE_TEMPLATE
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport mode access
 switchport block unicast
 switchport port-security aging type inactivity
!
template IP_PHONE_INTERFACE_TEMPLATE
 storm-control broadcast level pps 1k
 storm-control multicast level pps 2k
 storm-control action trap
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport mode access
 switchport block unicast
 load-interval 30
 ip dhcp snooping limit rate 15
!
template LAP_INTERFACE_TEMPLATE
 storm-control broadcast level pps 1k
 storm-control multicast level pps 2k
 storm-control action trap
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport access vlan 2045
 switchport mode access
 switchport block unicast
 load-interval 30
 ip dhcp snooping limit rate 15
!
template SWITCH_INTERFACE_TEMPLATE
 switchport mode trunk
!
template TP_INTERFACE_TEMPLATE
 storm-control broadcast level pps 1k
 storm-control multicast level pps 2k
 storm-control action trap
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport mode access
 switchport port-security aging type inactivity
 load-interval 30
 ip dhcp snooping limit rate 15
!
!
interface Loopback0
 description Fabric Underlay RID - do not change
 ip address 10.124.1.1 255.255.255.255
 ip router isis 
!
interface Port-channel1
 switchport mode trunk
!
interface LISP0
!
interface LISP0.4097
!
interface LISP0.4099
!
interface LISP0.4100
!
interface L2LISP0
!
interface L2LISP0.8189
!
interface L2LISP0.8190
!
interface L2LISP0.8192
!
interface L2LISP0.8193
!
interface GigabitEthernet0/0
 vrf forwarding Mgmt-vrf
 no ip address
 shutdown
 negotiation auto
!
interface GigabitEthernet1/0/1
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface GigabitEthernet1/0/2
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/3
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/4
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/5
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/6
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/7
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/8
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/9
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/10
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/11
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/12
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/13
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/14
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/15
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/16
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/17
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/18
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/19
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/20
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface GigabitEthernet1/0/21
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 et-analytics enable
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/22
 switchport mode access
 device-tracking attach-policy IPDT_POLICY
 dot1x timeout tx-period 2
 dot1x max-reauth-req 3
 source template DefaultWiredDot1xClosedAuth
 spanning-tree portfast
 spanning-tree bpduguard enable
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface GigabitEthernet1/0/23
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/0/24
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface GigabitEthernet1/1/1
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/1/2
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/1/3
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface GigabitEthernet1/1/4
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/1
 description L3 To Border1 te1/1/1
 no switchport
 dampening
 ip address 10.125.0.2 255.255.255.252
 no ip redirects
 no ip proxy-arp
 ip router isis 
 ip lisp source-locator Loopback0
 load-interval 30
 carrier-delay msec 0
 bfd interval 300 min_rx 300 multiplier 3
 no bfd echo
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface TenGigabitEthernet1/1/2
 description L3 To Border2 te1/1/2
 no switchport
 dampening
 ip address 10.125.0.26 255.255.255.252
 no ip redirects
 no ip proxy-arp
 ip router isis 
 ip lisp source-locator Loopback0
 load-interval 30
 carrier-delay msec 0
 bfd interval 300 min_rx 300 multiplier 3
 no bfd echo
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface TenGigabitEthernet1/1/3
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/4
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/5
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/6
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/7
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TenGigabitEthernet1/1/8
 switchport mode trunk
 cts manual
  policy static sgt 8000 trusted
 channel-group 1 mode desirable
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
!
interface FortyGigabitEthernet1/1/1
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface FortyGigabitEthernet1/1/2
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TwentyFiveGigE1/1/1
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface TwentyFiveGigE1/1/2
 device-tracking attach-policy IPDT_POLICY
 et-analytics enable
 service-policy input DNA-MARKING_IN
 service-policy output DNA-dscp#APIC_QOS_Q_OUT
 ip nbar protocol-discovery
!
interface AppGigabitEthernet1/0/1
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan1021
 description Configured from Cisco DNA-Center
 mac-address 0000.0c9f.f878
 vrf forwarding Campus
 ip address 10.100.0.1 255.255.0.0
 ip helper-address 10.10.0.250
 no ip redirects
 ip route-cache same-interface
 no lisp mobility liveness test
 lisp mobility Campus-IPV4
!
interface Vlan1022
 description Configured from Cisco DNA-Center
 mac-address 0000.0c9f.f69f
 vrf forwarding Guest
 ip address 10.99.0.1 255.255.0.0
 ip helper-address 10.10.0.250
 no ip redirects
 ip route-cache same-interface
 no lisp mobility liveness test
 lisp mobility Guest-IPV4
!
interface Vlan2045
 description Configured from Cisco DNA-Center
 mac-address 0000.0c9f.fa3f
 ip address 10.123.0.1 255.255.0.0
 ip helper-address global 10.10.0.250
 no ip redirects
 ip route-cache same-interface
 no lisp mobility liveness test
 lisp mobility AccessPoints-IPV4
!
interface Vlan2047
 description Configured from Cisco DNA-Center
 mac-address 0000.0c9f.fa61
 ip address 10.126.2.1 255.255.255.0
 ip helper-address global 10.10.0.250
 no ip redirects
 ip route-cache same-interface
 no lisp mobility liveness test
 lisp mobility ExtendedNode-IPV4
!
router lisp
 locator-table default
 locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
  IPv4-interface Loopback0 priority 10 weight 10
  exit-locator-set
 !
 locator default-set rloc_976453c9-d7be-4943-8929-d80e101b539d
 service ipv4
  encapsulation vxlan
  itr map-resolver 10.124.0.1
  itr map-resolver 10.124.0.2
  etr map-server 10.124.0.1 key 7 01455150030D045F744D4B5C1C5143415E
  etr map-server 10.124.0.1 proxy-reply
  etr map-server 10.124.0.2 key 7 040D5C5257274E1E5C180042175F58577F
  etr map-server 10.124.0.2 proxy-reply
  etr
  sgt
  no map-cache away-eids send-map-request
  use-petr 10.124.0.1
  use-petr 10.124.0.2
  proxy-itr 10.124.1.1
  exit-service-ipv4
 !
 service ethernet
  itr map-resolver 10.124.0.1
  itr map-resolver 10.124.0.2
  itr
  etr map-server 10.124.0.1 key 7 08771B1A511F0747470A09512F7F707B66
  etr map-server 10.124.0.1 proxy-reply
  etr map-server 10.124.0.2 key 7 0250530F53000D71194F0C4C0043465859
  etr map-server 10.124.0.2 proxy-reply
  etr
  exit-service-ethernet
 !
 instance-id 4097
  remote-rloc-probe on-route-change
  dynamic-eid AccessPoints-IPV4
   database-mapping 10.123.0.0/16 locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-dynamic-eid
  !
  dynamic-eid ExtendedNode-IPV4
   database-mapping 10.126.2.0/24 locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-dynamic-eid
  !
  service ipv4
   eid-table default
   exit-service-ipv4
  !
  exit-instance-id
 !
 instance-id 4099
  remote-rloc-probe on-route-change
  dynamic-eid Campus-IPV4
   database-mapping 10.100.0.0/16 locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-dynamic-eid
  !
  service ipv4
   eid-table vrf Campus
   map-cache 0.0.0.0/0 map-request
   exit-service-ipv4
  !
  exit-instance-id
 !
 instance-id 4100
  remote-rloc-probe on-route-change
  dynamic-eid Guest-IPV4
   database-mapping 10.99.0.0/16 locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-dynamic-eid
  !
  service ipv4
   eid-table vrf Guest
   map-cache 0.0.0.0/0 map-request
   exit-service-ipv4
  !
  exit-instance-id
 !
 instance-id 8189
  remote-rloc-probe on-route-change
  service ethernet
   eid-table vlan 2045
   database-mapping mac locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-service-ethernet
  !
  exit-instance-id
 !
 instance-id 8190
  remote-rloc-probe on-route-change
  service ethernet
   eid-table vlan 2047
   database-mapping mac locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-service-ethernet
  !
  exit-instance-id
 !
 instance-id 8192
  remote-rloc-probe on-route-change
  service ethernet
   eid-table vlan 1021
   database-mapping mac locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-service-ethernet
  !
  exit-instance-id
 !
 instance-id 8193
  remote-rloc-probe on-route-change
  service ethernet
   eid-table vlan 1022
   database-mapping mac locator-set rloc_976453c9-d7be-4943-8929-d80e101b539d
   exit-service-ethernet
  !
  exit-instance-id
 !
 ipv4 locator reachability minimum-mask-length 32 proxy-etr-only
 ipv4 source-locator Loopback0
 exit-router-lisp
!
router isis
 net 49.0000.0111.0111.0010.00
 is-type level-2-only
 router-id Loopback0
 domain-password xxxxxx
 metric-style transition
 log-adjacency-changes
 bfd all-interfaces
!
ip forward-protocol nd
ip http server
ip http authentication local
ip http secure-server
ip http max-connections 16
ip http client source-interface Loopback0
ip tftp source-interface Loopback0
ip tftp blocksize 1468
ip route 10.10.0.0 255.255.255.0 10.125.0.1 240
ip route 10.10.0.0 255.255.255.0 10.125.0.25 240
ip route 10.127.100.0 255.255.255.0 10.125.0.1 240
ip route 10.127.100.0 255.255.255.0 10.125.0.25 240
ip ssh source-interface Loopback0
ip ssh version 2
!
!
ip access-list extended ACL_WEBAUTH_REDIRECT
 120 deny   ip any host 10.10.0.200
 500 permit tcp any any eq www
 600 permit tcp any any eq 443
 700 permit tcp any any eq 8443
 800 deny   udp any any eq domain
 900 deny   udp any eq bootpc any eq bootps
ip access-list extended AutoConf-4.0-Acl-Default
 10 permit ip any any
ip access-list extended DNA-MARKING_IN#OAM_CUSTOM__acl
 10 remark dns
 10 permit tcp any any eq domain
 20 permit tcp any any eq 5353
 30 permit udp any any eq domain
 40 permit udp any any eq 5353
ip access-list extended DNA-MARKING_IN#TUNNELED-NBAR__acl
 10 remark capwap-data
 10 permit udp any any eq 5246
 20 permit udp any any eq 5247
 30 remark vxlan
 30 permit udp any any eq 4789
ip access-list extended IPV4_CRITICAL_AUTH_ACL
 10 permit ip any any
ip access-list extended IPV4_PRE_AUTH_ACL
 10 permit udp any any eq bootpc
 20 permit udp any any eq domain
 30 deny   ip any any
!
!
ip radius source-interface Loopback0 
ip sla 1
 icmp-echo 10.10.0.200 source-interface Loopback0
  frequency 30
ip sla schedule 1 life forever start-time now
logging source-interface Loopback0
logging host 10.10.0.20
!
!
snmp-server community xxxxxxxx RO
snmp-server community xxxxxxxx RW
snmp-server trap-source Loopback0
snmp-server enable traps snmp authentication linkdown linkup coldstart warmstart
snmp-server enable traps flowmon
snmp-server enable traps entity-perf throughput-notif
snmp-server enable traps call-home message-send-fail server-fail
snmp-server enable traps tty
snmp-server enable traps ospf state-change
snmp-server enable traps ospf errors
snmp-server enable traps ospf retransmit
snmp-server enable traps ospf lsa
snmp-server enable traps ospf cisco-specific state-change nssa-trans-change
snmp-server enable traps ospf cisco-specific state-change shamlink interface
snmp-server enable traps ospf cisco-specific state-change shamlink neighbor
snmp-server enable traps ospf cisco-specific errors
snmp-server enable traps ospf cisco-specific retransmit
snmp-server enable traps ospf cisco-specific lsa
snmp-server enable traps eigrp
snmp-server enable traps auth-framework sec-violation
snmp-server enable traps rep
snmp-server enable traps vtp
snmp-server enable traps vlancreate
snmp-server enable traps vlandelete
snmp-server enable traps port-security
snmp-server enable traps license
snmp-server enable traps smart-license
snmp-server enable traps cpu threshold
snmp-server enable traps memory bufferpeak
snmp-server enable traps stackwise
snmp-server enable traps udld link-fail-rpt
snmp-server enable traps udld status-change
snmp-server enable traps fru-ctrl
snmp-server enable traps flash insertion removal lowspace
snmp-server enable traps energywise
snmp-server enable traps power-ethernet group 1 threshold 80
snmp-server enable traps power-ethernet police
snmp-server enable traps entity
snmp-server enable traps pw vc
snmp-server enable traps mvpn
snmp-server enable traps envmon
snmp-server enable traps cef resource-failure peer-state-change peer-fib-state-change inconsistency
snmp-server enable traps lisp
snmp-server enable traps isis
snmp-server enable traps ipsla
snmp-server enable traps entity-diag boot-up-fail hm-test-recover hm-thresh-reached scheduled-test-fail
snmp-server enable traps bfd
snmp-server enable traps ike policy add
snmp-server enable traps ike policy delete
snmp-server enable traps ike tunnel start
snmp-server enable traps ike tunnel stop
snmp-server enable traps ipsec cryptomap add
snmp-server enable traps ipsec cryptomap delete
snmp-server enable traps ipsec cryptomap attach
snmp-server enable traps ipsec cryptomap detach
snmp-server enable traps ipsec tunnel start
snmp-server enable traps ipsec tunnel stop
snmp-server enable traps ipsec too-many-sas
snmp-server enable traps config-copy
snmp-server enable traps config
snmp-server enable traps config-ctid
snmp-server enable traps dhcp
snmp-server enable traps event-manager
snmp-server enable traps hsrp
snmp-server enable traps ipmulticast
snmp-server enable traps msdp
snmp-server enable traps ospfv3 state-change
snmp-server enable traps ospfv3 errors
snmp-server enable traps pim neighbor-change rp-mapping-change invalid-pim-message
snmp-server enable traps bridge newroot topologychange
snmp-server enable traps stpx inconsistency root-inconsistency loop-inconsistency
snmp-server enable traps syslog
snmp-server enable traps bgp cbgp2
snmp-server enable traps nhrp nhs
snmp-server enable traps nhrp nhc
snmp-server enable traps nhrp nhp
snmp-server enable traps nhrp quota-exceeded
snmp-server enable traps mpls rfc ldp
snmp-server enable traps mpls ldp
snmp-server enable traps mpls rfc traffic-eng
snmp-server enable traps mpls traffic-eng
snmp-server enable traps mpls fast-reroute protected
snmp-server enable traps local-auth
snmp-server enable traps vlan-membership
snmp-server enable traps errdisable
snmp-server enable traps rf
snmp-server enable traps transceiver all
snmp-server enable traps bulkstat collection transfer
snmp-server enable traps mac-notification change move threshold
snmp-server enable traps vrfmib vrf-up vrf-down vnet-trunk-up vnet-trunk-down
snmp-server enable traps mpls vpn
snmp-server enable traps mpls rfc vpn
snmp-server host 10.10.0.20 version 2c xxxxxxxx 
!
radius-server attribute 6 on-for-login-auth
radius-server attribute 6 support-multiple
radius-server attribute 8 include-in-access-req
radius-server attribute 25 access-request include
radius-server attribute 31 mac format ietf upper-case
radius-server attribute 31 send nas-port-detail mac-only
radius-server dead-criteria time 5 tries 3
radius-server deadtime 3
!
radius server dnac-radius_10.10.0.200
 address ipv4 10.10.0.200 auth-port 1812 acct-port 1813
 timeout 4
 retransmit 3
 automate-tester username dummy ignore-acct-port probe-on
  pac key 7 xxxxxxxx
!
!
ipv6 access-list IPV6_CRITICAL_AUTH_ACL
 sequence 10 permit ipv6 any any
!
ipv6 access-list IPV6_PRE_AUTH_ACL
 sequence 10 permit udp any any eq bootpc
 sequence 20 permit udp any any eq domain
 sequence 30 deny ipv6 any any
!
control-plane
 service-policy input system-cpp-policy
!
cts role-based sgt-map 10.10.0.1 sgt 29
cts role-based sgt-map 10.10.0.7 sgt 29
cts role-based sgt-map 10.10.0.10 sgt 29
cts role-based sgt-map 10.10.0.20 sgt 29
cts role-based sgt-map 10.10.0.21 sgt 29
cts role-based sgt-map 10.10.0.22 sgt 29
cts role-based sgt-map 10.10.0.30 sgt 29
cts role-based sgt-map 10.10.0.31 sgt 29
cts role-based sgt-map 10.10.0.32 sgt 30
cts role-based sgt-map 10.10.0.40 sgt 28
cts role-based sgt-map 10.10.0.100 sgt 28
cts role-based sgt-map 10.10.0.200 sgt 27
cts role-based sgt-map 10.10.0.250 sgt 26
cts role-based sgt-map 10.10.0.251 sgt 26
cts role-based sgt-map 10.10.0.252 sgt 14
cts role-based enforcement
cts role-based enforcement vlan-list 1021-1022,2045,2047
alias exec show-pov-version event manager run show-pov-version
alias exec fix-ssh event manager run fix-ssh
alias exec prep-rtr event manager run prep-rtr
alias exec enable-netconf event manager run enable-netconf
alias exec enable-guestshell event manager run enable-guestshell
alias exec prep-rtr-sec event manager run prep-rtr-sec
!
line con 0
 exec-timeout 60 0
 privilege level 15
 logging synchronous
 stopbits 1
line vty 0 4
 exec-timeout 60 0
 privilege level 15
 logging synchronous
 transport input telnet ssh
line vty 5 15
 exec-timeout 60 0
 privilege level 15
 logging synchronous
 transport input telnet ssh
line vty 16 31
 transport input ssh
!
call-home
 ! If contact email address in call-home is configured as sch-smart-licensing@cisco.com
 ! the email address configured in Cisco Smart License Portal will be used as contact email address to send SCH notifications.
 contact-email-addr sch-smart-licensing@cisco.com
 profile "CiscoTAC-1"
  active
  destination transport-method http
ntp source Loopback0
ntp server 10.10.0.250
!
!
!
!
!
event manager applet ssh-and-netconf
 event syslog pattern "ip sla 1 reachability Down -> Up"
 action a1010 syslog msg "Start: 'ssh-and-netconf' EEM applet."
 action b1010 cli command "enable"
 action b1020 cli command "fix-ssh"
 action c1010 syslog msg "Starting nested EEM script: 'enable-netconf'."
 action c1020 cli command "enable-netconf"
 action z1010 syslog msg "End: 'ssh-and-netconf' EEM applet."
event manager applet enable-netconf
 event none sync yes
 action a1010 syslog msg "Start: 'enable-netconf' EEM applet."
 action b1010 cli command "enable"
 action b1020 cli command "conf t"
 action b1030 cli command "netconf-yang"
 action b1040 cli command "yes"
 action b1050 cli command "end"
 action z1010 syslog msg "End: 'enable-netconf' EEM applet."
event manager applet fix-ssh
 event none sync yes
 action a1010 syslog msg "Start: 'fix-ssh' EEM applet."
 action b1010 cli command "enable"
 action b1020 cli command "conf t"
 action b1030 cli command "crypto key gen rsa mod 1024"
 action b1040 cli command "end"
 action z1010 syslog msg "Stop: 'fix-ssh' EEM applet."
event manager applet enable-guestshell
 event none sync yes maxrun 240
 action a1010 syslog msg "Start: 'enable-guestshell' EEM applet.  This will take about 60 seconds to complete."
 action b1010 cli command "enable"
 action b1020 cli command "conf t"
 action b1030 cli command "iox"
 action b1040 syslog msg "Enabled IOX.  Waiting 45 seconds for it to start."
 action b1050 wait 45
 action b1060 cli command "end"
 action c1010 cli command "guestshell enable"
 action z1010 syslog msg "IOX and GuestShell enabled."
 action z1020 syslog msg "Stop: 'enable-guestshell' EEM applet."
event manager applet prep-rtr
 event none sync yes maxrun 240
 action a1010 syslog msg "Start: 'prep-rtr'  EEM applet."
 action a1020 puts "Preparing device to start the lab.  Note: This script will reboot the device."
 action b1010 cli command "enable"
 action b1020 puts "Erasing startup-config."
 action b1030 cli command "wr er" pattern "confirm"
 action b1040 cli command "y"
 action b1050 puts "Clearing crypto keys."
 action b1060 cli command "config t"
 action b1070 cli command "crypto key zeroize" pattern "yes/no"
 action b1080 cli command "y"
 action b1090 cli command "no crypto pki cert pool" pattern "yes/no"
 action b1100 cli command "y"
 action b1110 cli command "exit"
 action b1120 puts "Deleting vlan.dat file."
 action b1130 cli command "delete /force vlan.dat"
 action b1140 puts "Copying flash:pov-base-config to startup-config."
 action b1150 cli command "copy pov-base-config start" pattern "startup-config"
 action b1160 cli command "startup-config"
 action c1010 puts "Starting nested-EEM script 'enable-guestshell'.  Expect a 75 second delay before this script continues."
 action c1020 cli command "enable-guestshell"
 action c1030 wait 75
 action z1010 puts "Device is prepared for the beginning of the lab.  Rebooting."
 action z1020 syslog msg "Stop: 'prep-rtr' EEM applet."
 action z1030 reload
event manager applet prep-rtr-sec
 event none sync yes maxrun 240
 action a1010 syslog msg "Start: 'prep-rtr-sec'  EEM applet."
 action a1020 puts "Preparing device to start the lab.  Note: This script will reboot the device."
 action b1010 cli command "enable"
 action b1020 puts "Erasing startup-config."
 action b1030 cli command "wr er" pattern "confirm"
 action b1040 cli command "y"
 action b1050 puts "Clearing crypto keys."
 action b1060 cli command "config t"
 action b1070 cli command "crypto key zeroize" pattern "yes/no"
 action b1080 cli command "y"
 action b1090 cli command "no crypto pki cert pool" pattern "yes/no"
 action b1100 cli command "y"
 action b1110 cli command "exit"
 action b1120 puts "Deleting vlan.dat file."
 action b1130 cli command "delete /force vlan.dat"
 action b1140 puts "Copying flash:pov-base-config-sec to startup-config."
 action b1150 cli command "copy pov-base-config-sec start" pattern "startup-config"
 action b1160 cli command "startup-config"
 action c1010 puts "Starting nested-EEM script 'enable-guestshell'.  Expect a 75 second delay before this sc"
 action c1020 cli command "enable-guestshell"
 action c1030 wait 75
 action z1010 puts "Device is prepared for the beginning of the lab.  Rebooting."
 action z1020 syslog msg "Stop: 'prep-rtr' EEM applet."
 action z1030 reload
event manager applet show-pov-version
 event none sync yes
 action a1010 puts "SDA PoV config version v2.6"
event manager applet DAILY-RESET
 event timer cron name DAILY-RESET cron-entry "30 08 * * 1-5"
 action 1.0 syslog msg "RUN: 'DAILY-RESET'  EEM applet."
 action 2.0 puts "DAILY-RESET"
 action 2.1 cli command "enable"
 action 2.2 cli command "config t"
 action 2.3 cli command "int ra gi 1/0/23-24"
 action 2.4 puts "SHUTDOWN"
 action 2.5 cli command "shut"
 action 2.6 puts "NO SHUTDOWN"
 action 2.7 cli command "no shut"
 action 2.8 cli command "exit"
!
pnp startup-vlan 2047
telemetry ietf subscription 500
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/poe_port_detail
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 60000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 501
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/poe_module
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 60000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 502
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/poe_stack
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 60000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 503
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/poe_switch
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 60000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 504
 encoding encode-tdl
 filter nested-uri /services;serviceName=ios_oper/platform_component;cname=0?platform_properties
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 30000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 550
 encoding encode-tdl
 filter tdl-uri /services;serviceName=smevent/sessionevent
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 551
 encoding encode-tdl
 filter tdl-uri /services;serviceName=sessmgr_oper/session_context_data
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 360000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 552
 encoding encode-tdl
 filter tdl-uri /services;serviceName=iosevent/sisf_mac_oper_state
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 553
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/sisf_db_wired_mac
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 360000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 554
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/cdp_neighbor_detail
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 360000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 555
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/cdp_neighbor_detail
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 600
 encoding encode-tdl
 filter tdl-uri /services;serviceName=sessmgr_oper/tbl_aaa_servers_stat
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 60000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 601
 encoding encode-tdl
 filter tdl-uri /services;serviceName=sessmgr_oper/tbl_aaa_servers_stat
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 602
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_emul_oper/lisp_routers;top_id=0/sessions
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 360000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 603
 encoding encode-tdl
 filter tdl-uri /services;serviceName=iosevent/lisp_tcp_session_state
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 604
 encoding encode-tdl
 filter nested-uri /services;serviceName=ios_emul_oper/lisp_routers;top_id=0/instances;iid=0/af;iaftype=LISP_TDL_IAF_IPV4/lisp_publisher
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 360000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 605
 encoding encode-tdl
 filter tdl-uri /services;serviceName=iosevent/lisp_pubsub_session_state
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 750
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_emul_oper/environment_sensor
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 30000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 751
 encoding encode-tdl
 filter tdl-uri /services;serviceName=ios_oper/platform_component
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 30000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 1020
 encoding encode-tdl
 filter tdl-uri /services;serviceName=iosevent/install_status
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy on-change
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry ietf subscription 8882
 encoding encode-tdl
 filter tdl-transform trustSecCounterDelta
 receiver-type protocol
 source-address 10.124.1.1
 stream native
 update-policy periodic 90000
 receiver name DNAC_ASSURANCE_RECEIVER
telemetry receiver protocol DNAC_ASSURANCE_RECEIVER
 host ip-address 10.10.0.20 25103
 protocol tls-native profile sdn-network-infra-iwan
telemetry transform trustSecCounterDelta
 input table cts_rolebased_policy
  field dst_sgt
  field src_sgt
  field sgacl_name
  field monitor_mode
  field num_of_sgacl
  field policy_life_time
  field total_deny_count
  field last_updated_time
  field total_permit_count
  join-key cts_role_based_policy_key
  logical-op and
  type mandatory
  uri /services;serviceName=ios_emul_oper/cts_rolebased_policy
 operation 1
  output-field 1
   field cts_rolebased_policy.src_sgt
  output-field 2
   field cts_rolebased_policy.dst_sgt
  output-field 3
   field cts_rolebased_policy.total_permit_count
   output-op type delta
  output-field 4
   field cts_rolebased_policy.total_deny_count
   output-op type delta
  output-field 5
   field cts_rolebased_policy.sgacl_name
  output-field 6
   field cts_rolebased_policy.monitor_mode
  output-field 7
   field cts_rolebased_policy.num_of_sgacl
  output-field 8
   field cts_rolebased_policy.policy_life_time
  output-field 9
   field cts_rolebased_policy.last_updated_time
 specified
netconf-yang
end

